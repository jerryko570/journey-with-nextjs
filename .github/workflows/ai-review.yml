name: AI Code Review (Free)

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  ai_review:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Run AI Code Review
        uses: lobe-review/action@v1
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          review-level: "balanced" # fast | strict | balanced
          files: "src/**/*.{ts,tsx,js,jsx}"
          rules: |
            - Check readability and maintainability
            - Suggest performance improvements
            - Detect unused code or unnecessary conditions
            - Review Tailwind naming consistency
            - Storybook props/args structure review
            - Warn about complex components needing split 
            - Suggest accessibility improvements
            - Detect potential bugs or edge cases

      - name: Comment summary on PR
        uses: marocchino/sticky-pull-request-comment@v2
        with:
          recreate: true
          message: |
            ğŸ¤– **AI Reviewer Summary**
            ì½”ë“œë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
            ì£¼ìš” ê°œì„ ì  & í”¼ë“œë°±ì€ ìœ„ ë¦¬ë·° ì½”ë©˜íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”!
